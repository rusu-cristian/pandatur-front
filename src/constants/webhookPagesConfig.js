// Номера WhatsApp, которые используют WaSender API вместо стандартного
export const WASENDER_WHATSAPP_PAGE_IDS = [
  "37360991919", // Chisinau
  "40721205105", // Brasov
];

export const WEBHOOK_PAGES_CONFIG = {
  facebooks: [
    {
      page_id: "142678122441525",
      page_name: "Panda Tur MD",
      type: "facebook",
      group_title: ["MD", "HR", "MARKETING", "INDIVIDUALGROUPS", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "110499316273706",
      page_name: "Panda Tur Chisinau",
      type: "facebook",
      group_title: ["MD", "HR", "MARKETING", "INDIVIDUALGROUPS", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "583828601488213",
      page_name: "Oferte Pandatur",
      type: "facebook",
      group_title: ["MD", "HR", "MARKETING", "INDIVIDUALGROUPS", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "112573875171623",
      page_name: "Panda Tour Brasov",
      type: "facebook",
      group_title: ["RO"]
    },
    {
      page_id: "130361096818926",
      page_name: "Panda Tour Bucuresti",
      type: "facebook",
      group_title: ["RO"]
    },
    {
      page_id: "150705011449556",
      page_name: "Panda Tour Romania",
      type: "facebook",
      group_title: ["RO"]
    },
    {
      page_id: "172917456820528",
      page_name: "Panda Tour Iasi",
      type: "facebook",
      group_title: ["RO"]
    },
    {
      page_id: "671031122758947",
      page_name: "Rascani",
      type: "facebook",
      group_title: ["RASCANI"]
    },
    {
      page_id: "520045481191100",
      page_name: "Drochia",
      type: "facebook",
      group_title: ["DROCHIA"]
    },
    {
      page_id: "554007254472079",
      page_name: "Soldanesti",
      type: "facebook",
      group_title: ["SOLDANESTI"]
    },
    {
      page_id: "526796067184543",
      page_name: "Edinet",
      type: "facebook",
      group_title: ["EDINET"]
    },
    {
      page_id: "613702355151882",
      page_name: "Buiucani",
      type: "facebook",
      group_title: ["BUIUCANI"]
    },
    {
      page_id: "605095636016314",
      page_name: "Ialoveni",
      type: "facebook",
      group_title: ["IALOVENI"]
    },
    {
      page_id: "573580082513912",
      page_name: "Causeni",
      type: "facebook",
      group_title: ["CAUSENI"]
    },
    {
      page_id: "696508703534741",
      page_name: "Orhei",
      type: "facebook",
      group_title: ["ORHEI"]
    },
    {
      page_id: "642015418986129",
      page_name: "Rezina",
      type: "facebook",
      group_title: ["REZINA"]
    },
    {
      page_id: "775542898973257",
      page_name: "Cimislia",
      type: "facebook",
      group_title: ["CIMISLIA"]
    },
    {
      page_id: "750746644794910",
      page_name: "Hancesti",
      type: "facebook",
      group_title: ["HANCESTI"]
    },
    {
      page_id: "789625717563101",
      page_name: "Stauceni",
      type: "facebook",
      group_title: ["STAUCENI"]
    },
    {
      page_id: "712585955262361",
      page_name: "Nisporeni",
      type: "facebook",
      group_title: ["NISPORENI"]
    },
    {
      page_id: "713252391860655",
      page_name: "Cantemir",
      type: "facebook",
      group_title: ["CANTEMIR"]
    },
    {
      page_id: "103418101475044",
      page_name: "Comrat",
      type: "facebook",
      group_title: ["COMRAT"]
    },
    {
      page_id: "1953801028210594",
      page_name: "Balti",
      type: "facebook",
      group_title: ["FILIALE"]
    },
    {
      page_id: "892518147271121",
      page_name: "Glodeni",
      type: "facebook",
      group_title: ["GLODENI"]
    },
    {
      page_id: "975030792362986",
      page_name: "Briceni",
      type: "facebook",
      group_title: ["BRICENI"]
    },
    {
      page_id: "187817508490443",
      page_name: "Cahul",
      type: "facebook",
      group_title: ["FILIALE"]
    },
    {
      page_id: "350678882163343",
      page_name: "Calarasi",
      type: "facebook",
      group_title: ["FILIALE"]
    },
    {
      page_id: "611412865950465",
      page_name: "Falesti",
      type: "facebook",
      group_title: ["FILIALE"]
    },
    {
      page_id: "255098058326027",
      page_name: "Ungheni",
      type: "facebook",
      group_title: ["FILIALE"]
    },
    {
      page_id: "777266025475762",
      page_name: "Catalan Travel Ua",
      type: "facebook",
      group_title: ["CATALAN"]
    },
    {
      page_id: "695617100305693",
      page_name: "Catalan travel Lviv",
      type: "facebook",
      group_title: ["CATALAN"]
    },
    {
      page_id: "819761597881879",
      page_name: "Catalan Kyiv",
      type: "facebook",
      group_title: ["CATALAN"]
    },
    {
      page_id: "680378511830178",
      page_name: "Catalan travel Odesa",
      type: "facebook",
      group_title: ["CATALAN"]
    },
    {
      page_id: "1818211991820544",
      page_name: "Orhei 2",
      type: "facebook",
      group_title: ["ORHEI"]
    },
    {
      page_id: "100132642667133",
      page_name: "Pelerinaje",
      type: "facebook",
      group_title: ["MD", "HR", "MARKETING", "INDIVIDUALGROUPS", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "963368826841184",
      page_name: "Soroca",
      type: "facebook",
      group_title: ["SOROCA"]
    },
    {
      page_id: "947485048439108",
      page_name: "Varnita",
      type: "facebook",
      group_title: ["VARNITA"]
    },
    {
      page_id: "930861530106479",
      page_name: "Aneni Noi",
      type: "facebook",
      group_title: ["ANENIINOI"]
    }
  ],
  instagrams: [
    {
      page_id: "17841474040991649",
      page_name: "Panda Tur MD",
      type: "instagram",
      group_title: ["MD", "HR", "MARKETING", "INDIVIDUALGROUPS", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "17841473358875325",
      page_name: "Oferte Pandatur",
      type: "instagram",
      group_title: ["MD", "HR", "MARKETING", "INDIVIDUALGROUPS", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "17841475266910359",
      page_name: "Rascani",
      type: "instagram",
      group_title: ["RASCANI"]
    },
    {
      page_id: "17841477312877531",
      page_name: "Glodeni",
      type: "instagram",
      group_title: ["GLODENI"]
    },
    {
      page_id: "17841478256617021",
      page_name: "Briceni",
      type: "instagram",
      group_title: ["BRICENI"]
    },
    {
      page_id: "17841473664962072",
      page_name: "Drochia",
      type: "instagram",
      group_title: ["DROCHIA"]
    },
    {
      page_id: "17841473802957787",
      page_name: "Soldanesti",
      type: "instagram",
      group_title: ["SOLDANESTI"]
    },
    {
      page_id: "17841473805179062",
      page_name: "Edinet",
      type: "instagram",
      group_title: ["EDINET"]
    },
    {
      page_id: "17841472932273948",
      page_name: "Buiucani",
      type: "instagram",
      group_title: ["BUIUCANI"]
    },
    {
      page_id: "17841472760225651",
      page_name: "Ialoveni",
      type: "instagram",
      group_title: ["IALOVENI"]
    },
    {
      page_id: "17841473531937584",
      page_name: "Causeni",
      type: "instagram",
      group_title: ["CAUSENI"]
    },
    {
      page_id: "17841474362476129",
      page_name: "Orhei",
      type: "instagram",
      group_title: ["ORHEI"]
    },
    {
      page_id: "17841473585604688",
      page_name: "Rezina",
      type: "instagram",
      group_title: ["REZINA"]
    },
    {
      page_id: "17841474097621521",
      page_name: "Cantemir",
      type: "instagram",
      group_title: ["CANTEMIR"]
    },
    {
      page_id: "17841406366155327",
      page_name: "Balti",
      type: "instagram",
      group_title: ["FILIALE"]
    },
    {
      page_id: "17841408150041038",
      page_name: "Cahul",
      type: "instagram",
      group_title: ["FILIALE"]
    },
    {
      page_id: "17841451827167218",
      page_name: "Calarasi",
      type: "instagram",
      group_title: ["FILIALE"]
    },
    {
      page_id: "17841453610678126",
      page_name: "Falesti",
      type: "instagram",
      group_title: ["FILIALE"]
    },
    {
      page_id: "17841474220604628",
      page_name: "Ungheni",
      type: "instagram",
      group_title: ["FILIALE"]
    },
    {
      page_id: "17841461747788266",
      page_name: "Panda Tour Bucuresti",
      type: "instagram",
      group_title: ["RO"]
    },
    {
      page_id: "17841407499908167",
      page_name: "Panda Tour Romania",
      type: "instagram",
      group_title: ["RO"]
    },
    {
      page_id: "17841459583103605",
      page_name: "Panda Tour Brasov",
      type: "instagram",
      group_title: ["RO"]
    },
    {
      page_id: "17841462950750247",
      page_name: "Panda Tour Iasi",
      type: "instagram",
      group_title: ["RO"]
    },
    {
      page_id: "17841476778536529",
      page_name: "catalan_travel_ua",
      type: "instagram",
      group_title: ["CATALAN",]
    },
    {
      page_id: "17841413135356676",
      page_name: "catalantravellviv",
      type: "instagram",
      group_title: ["CATALAN",]
    },
    {
      page_id: "17841476494595459",
      page_name: "catalan_travel_kyiv",
      type: "instagram",
      group_title: ["CATALAN",]
    },
    {
      page_id: "17841475354894162",
      page_name: "catalantravel_odesa",
      type: "instagram",
      group_title: ["CATALAN",]
    },
    {
      page_id: "17841474848946740",
      page_name: "Nisporeni",
      type: "instagram",
      group_title: ["NISPORENI"]
    },
    {
      page_id: "17841410616631693",
      page_name: "Orhei 2",
      type: "instagram",
      group_title: ["ORHEI"]
    },
    {
      page_id: "17841476327737230",
      page_name: "Stauceni",
      type: "instagram",
      group_title: ["STAUCENI"]
    },
    {
      page_id: "17841477082751853",
      page_name: "Hancesti",
      type: "instagram",
      group_title: ["HANCESTI"]
    },
    {
      page_id: "17841476757016315",
      page_name: "Pelerinaje",
      type: "instagram",
      group_title: ["MD", "HR", "MARKETING", "INDIVIDUALGROUPS", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "17841478507227982",
      page_name: "Soroca",
      type: "instagram",
      group_title: ["SOROCA"]
    },
    {
      page_id: "17841478936480299",
      page_name: "Varnita",
      type: "instagram",
      group_title: ["VARNITA"]
    },
    {
      page_id: "17841478712821246",
      page_name: "Aneni Noi",
      type: "instagram",
      group_title: ["ANENIINOI"]
    }
  ],
  whatsapps: [
    // aista unu
    {
      page_id: "37360991919",
      page_name: "Chisinau - 37360991919",
      type: "phone",
      group_title: ["MD", "HR", "MARKETING", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "40799533533",
      page_name: "Timisoara - 40799533533",
      type: "phone",
      group_title: ["FRANCHISETIMISOARA"]
    },
    {
      page_id: "37369440400",
      page_name: "Chisinau - 37369440400",
      type: "phone",
      group_title: ["MD", "HR", "MARKETING", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "37361281919",
      page_name: "Individual Groups - 37361281919",
      type: "phone",
      group_title: ["INDIVIDUALGROUPS"]
    },
    {
      page_id: "37361161919",
      page_name: "Rascani - 37361161919",
      type: "phone",
      group_title: ["RASCANI"]
    },
    {
      page_id: "37368791919",
      page_name: "Glodeni - 37368791919",
      type: "phone",
      group_title: ["GLODENI"]
    },
    {
      page_id: "37361001919",
      page_name: "Rascani - 37361001919",
      type: "phone",
      group_title: ["RASCANI"]
    },
    {
      page_id: "37361141919",
      page_name: "Drochia - 37361141919",
      type: "phone",
      group_title: ["DROCHIA"]
    },
    {
      page_id: "37362170070",
      page_name: "Balti - 37362170070",
      type: "phone",
      group_title: ["FILIALE"]
    },
    {
      page_id: "37376051919",
      page_name: "Cahul - 37376051919",
      type: "phone",
      group_title: ["FILIALE"]
    },
    {
      page_id: "37379231919",
      page_name: "Calarasi - 37379231919",
      type: "phone",
      group_title: ["FILIALE"]
    },
    {
      page_id: "37376071919",
      page_name: "Falesti - 37376071919",
      type: "phone",
      group_title: ["FILIALE"]
    },
    {
      page_id: "37360225253",
      page_name: "Ungheni - 37360225253",
      type: "phone",
      group_title: ["FILIALE"]
    },
    // {
    //   page_id: "40720949119",
    //   page_name: "General RO - 40720949119",
    //   type: "phone",
    //   group_title: ["RO"]
    // },
    {
      page_id: "40730436216",
      page_name: "Back RO - 40730436216",
      type: "phone",
      group_title: ["RO"]
    },
    {
      page_id: "40728932931",
      page_name: "Bucuresti - 40728932931",
      type: "phone",
      group_title: ["RO"]
    },
    // 40721205105 asta 
    {
      page_id: "40721205105",
      page_name: "Brasov - 40721205105",
      type: "phone",
      group_title: ["RO"]
    },
    {
      page_id: "40790571838",
      page_name: "Iasi - 40790571838",
      type: "phone",
      group_title: ["RO"]
    },
    {
      page_id: "380984284284",
      page_name: "Catalan - 380984284284",
      type: "phone",
      group_title: ["CATALAN"]
    },
    {
      page_id: "37362161919",
      page_name: "Orhei - 37362161919",
      type: "phone",
      group_title: ["ORHEI"]
    },
    {
      page_id: "37360362200",
      page_name: "Briceni - 37360362200",
      type: "phone",
      group_title: ["BRICENI"]
    },
    {
      page_id: "37360021919",
      page_name: "Causeni - 37360021919",
      type: "phone",
      group_title: ["CAUSENI"]
    }, 
  ],
  vibers: [
    {
      page_id: "380984284284",
      page_name: "Catalan - 380984284284",
      type: "phone",
      group_title: ["CATALAN"]
    },
    {
      page_id: "37368791919",
      page_name: "Glodeni - 37368791919",
      type: "phone",
      group_title: ["GLODENI"]
    },
    {
      page_id: "37360991919",
      page_name: "Chisinau - 37360991919",
      type: "phone",
      group_title: ["MD", "HR", "MARKETING", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "37361281919",
      page_name: "Individual Groups - 37361281919",
      type: "phone",
      group_title: ["INDIVIDUALGROUPS"]
    },
    {
      page_id: "37361161919",
      page_name: "Rascani - 37361161919",
      type: "phone",
      group_title: ["RASCANI"]
    },
    {
      page_id: "37361001919",
      page_name: "Rascani - 37361001919",
      type: "phone",
      group_title: ["RASCANI"]
    },
    {
      page_id: "37361141919",
      page_name: "Drochia - 37361141919",
      type: "phone",
      group_title: ["DROCHIA"]
    },
    {
      page_id: "37362170070",
      page_name: "Balti - 37362170070",
      type: "phone",
      group_title: ["FILIALE"]
    },
    {
      page_id: "37376051919",
      page_name: "Cahul - 37376051919",
      type: "phone",
      group_title: ["FILIALE"]
    },
    {
      page_id: "37379231919",
      page_name: "Calarasi - 37379231919",
      type: "phone",
      group_title: ["FILIALE"]
    },
    {
      page_id: "37376071919",
      page_name: "Falesti - 37376071919",
      type: "phone",
      group_title: ["FILIALE"]
    },
    {
      page_id: "37360225253",
      page_name: "Ungheni - 37360225253",
      type: "phone",
      group_title: ["FILIALE"]
    },
    {
      page_id: "37362161919",
      page_name: "Orhei - 37362161919",
      type: "phone",
      group_title: ["ORHEI"]
    },
    {
      page_id: "37360021919",
      page_name: "Causeni - 37360021919",
      type: "phone",
      group_title: ["CAUSENI"]
    },    
  ],
  "viber-bots": [
    {
      page_id: "viber-bot-pandatur",
      page_name: "Chisinau - viber-bot-pandatur",
      type: "viber-bot",
      group_title: ["MD", "HR", "MARKETING", "FRANCHISE", "AGENCY"]
    }
  ],
  telegrams: [
    {
      page_id: "37360991919",
      page_name: "Chisinau - 37360991919",
      type: "telegram",
      group_title: ["MD", "HR", "MARKETING", "FRANCHISE", "AGENCY"]
    },
    {
      page_id: "37361281919",
      page_name: "Individual Groups - 37361281919",
      type: "telegram",
      group_title: ["INDIVIDUALGROUPS"]
    },
    // {
    //   page_id: "37360361919",
    //   page_name: "Chisinau - 37360361919",
    //   type: "telegram",
    //   group_title: "MD"
    // },
    {
      page_id: "37361001919",
      page_name: "Rascani - 37361001919",
      type: "telegram",
      group_title: ["RASCANI"]
    },
    {
      page_id: "37361161919",
      page_name: "Rascani - 37361161919",
      type: "telegram",
      group_title: ["RASCANI"]
    },
    {
      page_id: "37361141919",
      page_name: "Drochia - 37361141919",
      type: "telegram",
      group_title: ["DROCHIA"]
    },
    {
      page_id: "380984284284",
      page_name: "Catalan - 380984284284",
      type: "telegram",
      group_title: ["CATALAN"]
    }
  ]
};

// Вспомогательные функции для работы с конфигурацией
export const getPagesByType = (type) => {
  const key = `${type}s`;
  return WEBHOOK_PAGES_CONFIG[key] || [];
};

export const getPagesByGroupTitle = (groupTitle) => {
  const allPages = Object.values(WEBHOOK_PAGES_CONFIG).flat();
  return allPages.filter(page => {
    if (Array.isArray(page.group_title)) {
      return page.group_title.includes(groupTitle);
    }
    return page.group_title === groupTitle;
  });
};

export const getPageById = (pageId) => {
  const allPages = Object.values(WEBHOOK_PAGES_CONFIG).flat();
  return allPages.find(page => page.page_id === pageId);
};

export const getGroupTitles = () => {
  const allPages = Object.values(WEBHOOK_PAGES_CONFIG).flat();
  const allGroups = allPages.flatMap(page => {
    if (Array.isArray(page.group_title)) {
      return page.group_title;
    }
    return [page.group_title];
  });
  const uniqueGroups = [...new Set(allGroups)];
  return uniqueGroups.sort();
};

// Получить page_id для отправки сообщения по платформе и group_title
export const getPageIdByPlatformAndGroup = (platform, groupTitle) => {
  let key;
  if (platform === 'facebook') key = 'facebooks';
  else if (platform === 'instagram') key = 'instagrams';
  else if (platform === 'whatsapp') key = 'whatsapps';
  else if (platform === 'viber') key = 'vibers';
  else if (platform === 'telegram') key = 'telegrams';
  else if (platform === 'viber-bot') key = 'viber-bots';
  else return null;

  const pages = WEBHOOK_PAGES_CONFIG[key] || [];
  const page = pages.find(p => {
    if (Array.isArray(p.group_title)) {
      return p.group_title.includes(groupTitle);
    }
    return p.group_title === groupTitle;
  });
  return page?.page_id || null;
};
